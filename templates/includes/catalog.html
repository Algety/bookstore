 {% load static %}
           
                    {% for book in books %}
                        <div class="col-6-custom col-sm-6 col-md-4 col-lg-4 col-xl-3">
                            <div class="card h-100 border-0">
                                {% if book.image %}
                                    <a href="{% url 'book_detail' book.slug %}">
                                        <div class="aspect-ratio-box">
                                            <img src="{{ book.image.url }}" alt="{{ book.title }}">
                                        </div>
                                    </a>
                                {% else %}
                                    <a href="{% url 'book_detail' book.slug %}">
                                        <div class="aspect-ratio-box">
                                            <img src="{% static 'images/no_image.png' %}" alt="{{ book.title }}">
                                        </div>
                                    </a>
                                {% endif %}

                                <div class="card-body pb-0">
                                                                    <form class="add-to-cart-form" action="{% url 'add_to_cart' book.id %}" method="POST">
        {% csrf_token %}
        <input type="hidden" name="quantity" value="1">
        <input type="hidden" name="redirect_url" value="{{ request.path }}">
        <button type="submit" class="buy-btn border rounded-1">
            <span class="d-sm-block ">Add to cart</span>
        </button>
    </form>
                                    <p class="mb-0 mt-3">{{ book.title }}</p>
                                    <em class="mb-0">
                                        {% for author in book.authors.all %}
                                            {{ author.name }}{% if not forloop.last %}, {% endif %}
                                        {% endfor %}
                                    </em>
                                </div>
                                <div class="card-footer bg-white pt-0 border-0 text-left">
                                    <div class="row">
                                        <div class="col">
                                            <p class="lead mb-0 text-left font-weight-bold">Â£{{ book.price }}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body pb-0">
</div>

                            </div>
                        </div>
                    {% endfor %}
             
<script>
    document.querySelectorAll('form.add-to-cart-form').forEach(form => {
        form.addEventListener('submit', function () {
            localStorage.setItem('scrollPosition', window.scrollY);
        });
    });

    window.addEventListener('load', function () {
        const scrollY = localStorage.getItem('scrollPosition');
        if (scrollY !== null) {
            window.scrollTo(0, parseInt(scrollY));
            localStorage.removeItem('scrollPosition');
        }
    });
</script>
