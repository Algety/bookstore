<div class="control d-lg-none text-center mt-2 dropdown">
    <button class="btn-grey btn border rounded-1" type="button" id="categoriesDropdown" data-bs-toggle="dropdown" aria-expanded="false">
        <i class="fa-solid fa-bars d-sm-none"></i>
        <span class="d-none d-sm-block">Categories</span>
    </button>
    <div class="dropdown-menu p-2 border-0" aria-labelledby="categoriesDropdown" style="width: 280px;" data-bs-auto-close="false">
        <ul class="list-unstyled mb-0">
            {% for category in categories %}
                <li class="category-list">
                    <button class="dropdown-item w-100 text-start category-dropdown" type="button"
                            data-bs-toggle="collapse"
                            data-bs-target="#collapse{{ category.id }}"
                            aria-expanded="false"
                            aria-controls="collapse{{ category.id }}">
                        {{ category.get_screen_name }}  <i class="fa-regular fa-square-plus"></i>
                    </button>
                    {% if category.visible_subcategories %}
                        <div class="collapse ps-3 subcategory-list text-blue" id="collapse{{ category.id }}">
                            <a class="dropdown-item" href="{% url 'books' %}?category={{ category.id }}">
                                View all
                            </a>
                            {% for subcategory in category.visible_subcategories %}
                                <a class="dropdown-item" href="{% url 'books' %}?subcategory={{ subcategory.id }}&parent={{ category.id }}">
                                    {{ subcategory.get_screen_name }}
                                </a>
                            {% endfor %}
                        </div>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    </div>
</div>